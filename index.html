<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Javascript Variables for TrueBlue App -->
    <script type="text/javascript">
      var server = null;
      var APIversion = "v1.5";

      var clientId = 26;
      var GCMSenderID = "477779543707"; // Project Number

      var stripePublicKey = null;

      var preload = ["news", "products", "categories", "locations", "rewards", "pages"];
      var showLimit = 5;

      var backIcon = "food"; // food // products // shop // shopping

      var backTitle = "Menu"; // Food // Products // Menu
      var backTitleCH = "菜單"; // 食物 // 產品 // 菜單

      var backSearch = "the menu";
      var backSearchCH = "菜單";

      var customMessageArray = {
        food: "Food",
        drinks: "Drinks",
        desserts: "Desserts",
        topdrink: "Top Drinks",
        topdessert: "Top Desserts",
      };
      var customMessageArrayCH = {
        food: "Food",
        drinks: "Drinks",
        desserts: "Desserts",
        topdrink:"Top Drinks",
        topdessert:"Top Desserts",
      };
    </script>

    <!-- Uncomment for App -->
    <script type="text/javascript" src="cordova.js"></script>
    <script> server = "live"; </script>
    <!-- <script> server = "dev"; </script> -->

    <meta http-equiv="Content-Security-Policy" content="default-src * gap://ready file:; style-src 'self' 'unsafe-inline'; script-src * 'unsafe-inline' 'unsafe-eval'">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <title>Cha Me. Cha</title>
  </head>

  <body class="{{currentParent}} {{selectedLanguage}}" ng-class="{'activeOrder': activeOrders}" onload="onLoad()">
    <div class="server" ng-if="server != 'live'">{{server}}</div>

    <a id="orders" ng-if="activeOrders" href="#/orders/">
      <div class="order_status" ng-repeat="va in activeOrders track by $index | limitTo:1" ng-bind-html="orderStatusText(va);"></div>
      <div class="icon" rel="right"></div>
    </a>

    <nav id="header" nav-header icon-image="logo.png"></nav>

    <nav id="menu" ng-if="done">
      <ul ng-if="!userDetails && clientInfo" ng-show="showLoginInNav && clientInfo && clientInfo.account_flag == 1" id="console" user-forms></ul>
      <ul id="pages" ng-hide="showLoginInNav">
        <menu-top></menu-top>
        <li>
          <a href="#/news/" ng-class="{ 'selected' : currentParent == 'news' }" ng-click="closeMenu($event)">
            <div class="icon" rel="news"></div>
            {{text.menuNews}}
          </a>
          <div class="liner width"></div>
        </li>
        <li>
          <a href="#page/33/" ng-class="{'selected' : currentParent == 'food' }" ng-click="closeMenu($event)">
            <div class="icon" rel="food"></div>
            {{text.custom.food}}
          </a>
          <div class="liner width"></div>
        </li>
        <li>
          <a href="#page/34/" ng-class="{'selected' : currentParent == 'drinks' }" ng-click="closeMenu($event)">
            <div class="icon" rel="drink"></div>
            {{text.custom.drinks}}
          </a>
          <div class="liner width"></div>
        </li>
        <li>
          <a href="#page/35/" ng-class="{'selected' : currentParent == 'dessert' }" ng-click="closeMenu($event)">
            <div class="icon" rel="cake"></div>
            {{text.custom.desserts}}
          </a>
          <div class="liner width"></div>
        </li>
        <li>
          <a href="#/products/m391/" ng-class="currentParent == 'products 391' ? 'selected' : ''" ng-click="closeMenu($event)">
            <div class="custom_icon icon"></div>
            {{text.custom.topdrink}}
          </a>
          <div class="liner width"></div>
        </li>
        <li>
          <a href="#/products/m392/" ng-class="currentParent == 'products 392' ? 'selected' : ''" ng-click="closeMenu($event)">
            <div class="custom_icon icon"></div>
            {{text.custom.topdessert}}
          </a>
          <div class="liner width"></div>
        </li>
        <li ng-if="clientInfo.location_count > 1">
          <a href="#/locations/" ng-class="{ 'selected' : currentParent == 'locations' }" ng-click="closeMenu($event)">
            <div class="icon" rel="locations"></div>
            {{text.menuLocations}}
          </a>
          <div class="liner width"></div>
        </li>
        <li ng-if="clientInfo.location_count == 1">
          <a href="#/locations/{{clientInfo.location_id}}/" ng-class="{ 'selected' : currentParent == 'locations' }" ng-click="closeMenu($event)">
            <div class="icon" rel="locations"></div>
            {{text.menuLocation}}
          </a>
          <div class="liner width"></div>
        </li>
        <li>
          <a href="#/rewards/" ng-class="{ 'selected' : currentParent == 'rewards' }" ng-click="closeMenu($event)">
            <div class="icon" rel="rewards"></div>
            {{text.menuRewards}}
          </a>
        </li>

        <menu-bottom></menu-bottom>
      </ul>
    </nav>

    <section id="forms" ng-if="done" all-forms></section>


    <!-- OFFLINE STUFF -->
    <div class="offline" ng-show="offline" offline-page></div>
    <div id="shield" class="offline shield" ng-show="offline"></div>
    <!-- END OFFLINE STUFF -->

    <!-- APP UPDATE STUFF -->
    <div class="update" ng-if="updateAvailable" update-page></div>
    <div id="shield" class="offline shield" ng-if="updateAvailable"></div>
    <!-- END APP UPDATE STUFF -->

    <div id="shield" class="shield" ng-click="closeMenu($event);"></div>

    <section class="content" ng-view></section>

    <!-- Styles -->
    <link href="css/styles.css" rel="stylesheet" type="text/css" />

    <!-- TrueBlue Scripts -->
    <script type="text/javascript" src="js/trueBlue.other.min.js"></script>
    <script type="text/javascript" src="js/trueBlue.angular.min.js"></script>
    <script type="text/javascript" src="js/trueBlue.app.min.js"></script>
    <script type="text/javascript" src="js/trueBlue.override.js"></script>

    <!-- Stripe -->
    <script>
      if (typeof stripePublicKey != "undefined" && stripePublicKey != "") {
        async('https://js.stripe.com/v2/', function() {
          Stripe.setPublishableKey(stripePublicKey);
        });
      }
    </script>

    <!-- Inline JS -->
    <script type="text/javascript">
      // init for redundancy
      if (typeof facebookConnectPlugin === "undefined") {
        openFB.init({appId: '1523899957830230', tokenStore: window.localStorage});
      }

      function onLoad() {
        // testing.
        if (server != "live") {
          setTimeout(function() {
            console.log("dev deviceready");
            onDeviceReady();
          }, 1000);
        } else {
          console.log("onLoad");
          document.addEventListener("deviceready", onDeviceReady, false);
        }
      }
    </script>
  </body>
</html>
